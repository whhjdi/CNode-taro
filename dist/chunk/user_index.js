(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"135":function(e,t,n){"use strict";n.r(t);var r=n(142),a=n(0),o=n(40),s=n(1),c=n.n(s),i=n(145),u=n(63),l=n(65),f=n(9),p=(n(74),n(48)),d=n(138),h=(n(72),n(137)),g=n(64),m=n(62),v=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var y=function(e){function ListItem(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ListItem);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(ListItem.__proto__||Object.getPrototypeOf(ListItem)).apply(this,arguments));return e.state={"open":!1},e.defaultProps={"data":[]},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ListItem,a["a"].Component),v(ListItem,[{"key":"handleClick","value":function handleClick(e){this.setState({"open":e})}},{"key":"gotoDetail","value":function gotoDetail(e){a.a.navigateTo({"url":"/pages/detail/index?topicid="+e})}},{"key":"render","value":function render(){var e=this,t=this.props,n=t.data,r=t.title,a=this.state.open;return c.a.createElement(h.a,{"open":a,"onClick":this.handleClick.bind(this),"title":r},c.a.createElement(g.a,{"hasBorder":!0},n&&n.length>0?n.map(function(t){return c.a.createElement(i.a,{"key":t.id},c.a.createElement(m.a,{"arrow":"right","title":t.title||t.reply.content,"thumb":t.author.avatar_url,"onClick":e.gotoDetail.bind(e,t.id)}))}):c.a.createElement(m.a,{"title":"暂无主题","thumb":"https://img12.360buyimg.com/jdphoto/s72x72_jfs/t6160/14/2008729947/2754/7d512a86/595c3aeeNa89ddf71.png"})))}}]),ListItem}(),b=y=o.__decorate([Object(f.b)(function(e){return{}},function(e){return{}})],y),_=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var k=function(e){function User(){!function user_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,User);var e=function user_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(User.__proto__||Object.getPrototypeOf(User)).apply(this,arguments));return e.config={"navigationBarTitleText":"个人中心","navigationBarBackgroundColor":"#fff","navigationBarTextStyle":"black"},e}return function user_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(User,a["a"].Component),_(User,[{"key":"componentDidMount","value":function componentDidMount(){this.handleUserInfo()}},{"key":"handleUserInfo","value":function handleUserInfo(){var e=this.props,t=e.loginName,n=e.userInfo,r=e.getMessages,a=e.token;t&&(n(t),r(a))}},{"key":"handleLogout","value":function handleLogout(){Object(r.b)("token",""),this.props.userLogout(),a.a.redirectTo({"url":"/pages/index/index"})}},{"key":"render","value":function render(){var e=this.props.userData,t=e.avatar_url,n=e.loginname,r=e.recent_replies,a=e.recent_topics,o=e.hasReadMsgs,s=e.notReadMsgs;return c.a.createElement(i.a,{"className":"user"},c.a.createElement(i.a,{"className":"info"},c.a.createElement(i.a,{"className":"avatar-wrapper"},c.a.createElement(u.a,{"src":t||"","className":"avatar"}),c.a.createElement(l.a,{"className":"name"},n)),c.a.createElement(d.a,{"type":"primary","className":"logout","size":"small","onClick":this.handleLogout.bind(this)},"退出登录")),c.a.createElement(b,{"data":a,"title":"最新主题"}),c.a.createElement(b,{"data":r,"title":"最近回复"}),c.a.createElement(b,{"data":o,"title":"已读消息"}),c.a.createElement(b,{"data":s,"title":"未读消息"}))}},{"key":"componentDidShow","value":function componentDidShow(){}}]),User}();k=o.__decorate([Object(f.b)(function(e){return{"userData":e.user.userData,"loginName":e.user.loginName,"token":e.user.accessToken,"hasReadMsgs":e.user.hasReadMsgs,"notReadMsgs":e.user.notReadMsgs}},function(e){return{"userInfo":function userInfo(t){e(Object(p.c)(t))},"userLogout":function userLogout(){e(Object(p.d)())},"getMessages":function getMessages(t){e(Object(p.b)(t))}}})],k);t.default=k},"41":function(e,t,n){"use strict";var r=n(139),a=n(146);n(1);var o=function(){var e=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,a){try{var o=t[r](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}(regeneratorRuntime.mark(function _callee(e,t,n){return regeneratorRuntime.wrap(function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new Promise(function(o,s){Object(r.b)(),Object(a.a)({"url":e,"method":t,"data":n,"header":{"content-type":"application/json"}}).then(function(e){Object(r.a)(),o(e)}).catch(function(e){s(e)})}));case 1:case"end":return o.stop()}},_callee,this)}));return function request(t,n,r){return e.apply(this,arguments)}}(),s={"topics":"/topics","topic":"/topic","userInfo":"/user","accessToken":"/accesstoken","msgs":"/messages"};Object.keys(s).forEach(function(e){s[e]="https://cnodejs.org/api/v1"+s[e]});var c=s,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var u=function(){function fetchData(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,fetchData)}return i(fetchData,null,[{"key":"getTopicList","value":function getTopicList(e){return o(c.topics,"GET",e)}},{"key":"getTopicDetail","value":function getTopicDetail(e,t){var n=t||"";return o(c.topic+"/"+e,"GET",{"accesstoken":n})}},{"key":"userLogin","value":function userLogin(e){return o(c.accessToken,"POST",{"accesstoken":e})}},{"key":"getUserInfo","value":function getUserInfo(e){return o(c.userInfo+"/"+e,"GET")}},{"key":"fetchMessages","value":function fetchMessages(e){return o(c.msgs,"GET",{"accesstoken":e})}}]),fetchData}();t.a=u},"48":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return f});var r=n(41),a=n(5);function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,a){try{var o=t[r](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){step("next",e)},function(e){step("throw",e)});e(s)}("next")})}}var o=function accessUserToken(e){return t=_asyncToGenerator(regeneratorRuntime.mark(function _callee(t){var n;return regeneratorRuntime.wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.a.userLogin(e);case 3:return(n=a.sent).data.success?t(s(n.data,e)):t(c()),a.abrupt("return",n.data);case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}},_callee,void 0,[[0,8]])})),function(e){return t.apply(this,arguments)};var t},s=function _accessUserToken(e,t){return{"type":a.a,"userData":e,"token":t}},c=function _accessUserTokenFailed(){return{"type":a.b}},i=function userInfo(e){return t=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(t){var n;return regeneratorRuntime.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.a.getUserInfo(e);case 3:n=a.sent,t(u(n.data.data)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},_callee2,void 0,[[0,7]])})),function(e){return t.apply(this,arguments)};var t},u=function _userInfo(e){return{"type":a.d,"userData":e}},l=function userLogout(){return{"type":a.e}},f=function getMessages(e){return t=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(t){var n;return regeneratorRuntime.wrap(function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.a.fetchMessages(e);case 3:n=a.sent,t(p(n.data.data)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},_callee3,void 0,[[0,7]])})),function(e){return t.apply(this,arguments)};var t},p=function _getMessages(e){return{"type":a.c,"messages":e}}},"72":function(e,t,n){},"74":function(e,t,n){}}]);